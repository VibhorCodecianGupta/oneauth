{{!< centercolumn}}

<form class="form-group" method="post" action="/api/address/{{address.id}}">
    <input type="hidden" name="returnTo" id="redirect-input">
    <p>Edit Details for {{address.id}}</p>
    <div class="form-group">
        <label>Label</label>
        <input class="form-control" type="text" autocomplete='given-name' placeholder="Label" name="label" value="{{address.label}}">
    </div>
    <div class="form-group">
        <label>First Name</label>
        <input class="form-control" type="text" autocomplete='given-name' placeholder="First Name" name="first_name" value="{{address.first_name}}">
    </div>

    <div class="form-group">
        <label>Last Name</label>
        <input class="form-control" type="text" autocomplete='family-name' placeholder="Last Name" name="last_name" value="{{address.last_name}}">
    </div>
    <div class="form-group">
        <label>Mobile Number</label>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="plus-one">+91</span>
            </div>
            <input class="form-control" aria-describedby="plus-one" type="text" autocomplete='tel' pattern="[0-9]{10}" maxlength="10" placeholder="Mobile Number" name="number" value="{{address.mobile_number}}">
        </div>
    </div>
    <div class="form-group">
        <input class="form-control" autocomplete='email' type="email" placeholder="E-mail" name="email" value="{{address.email}}"><br>
    </div>

    <div class="form-group">
        <label>Street Address</label>
        <textarea class="form-control" rows="3"
                  autocomplete='street-address'
                  placeholder="Street Address"
                  name="street_address"
        >{{address.street_address}}</textarea>
    </div>
    <div class="form-group">
        <label>Landmark</label>
        <input class="form-control" type="text" placeholder="Landmark" autocomplete='address-level1' name="landmark" value="{{address.landmark}}">
    </div>
    <div class="form-group">
        <label>PIN/ZIP Code</label>
        <input class="form-control" autocomplete='postal-code' type="text" pattern="[0-9]{6}" maxlength="6" name="pincode" placeholder="Pin Code" value="{{address.pincode}}">
    </div>
    <div class="form-group">
        <label>City</label>
        <input class="form-control" type="text" placeholder="City" autocomplete='address-level2' name="city" value="{{address.city}}">
    </div>
    <label>State:</label>
    <select name="stateId" value="{{address.stateId}}" autocomplete='address-level2' class="m-2a form-control">
        {{#each states}}
            {{#ifeq expected=id val=../address.stateId}}
                <option value="{{id}}" selected>{{name}}</option>
            {{/ifeq}}
            {{#ifneq expected=id val=../address.stateId}}
                <option value="{{id}}">{{name}}</option>
            {{/ifneq}}
        {{/each}}
    </select>
    <label>Country:</label>
    <select name="countryId" class="m-2a form-control" autocomplete='country-name'>
        {{#each countries}}
            {{#ifeq expected=id val=../address.countryId}}
                <option value="{{id}}" selected>{{name}}</option>
            {{/ifeq}}
            {{#ifneq expected=id val=../address.countryId}}
                <option value="{{id}}">{{name}}</option>
            {{/ifneq}}
        {{/each}}
    </select>
    <input type="checkbox" {{#if address.primary}} checked {{/if}} name="primary"> This a primary address.<br>
    <div class="row mt-5p">
        <input class="btn btn-warning mx-auto" value="Update Address" type="submit">
    </div>
</form>
<script>
    $(function(){
        let params = (new URL(document.location)).searchParams;
        let url = params.get('returnTo')
        $('#redirect-input').val(url)
    })
</script>
